!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.React.tagify=t()}(this,(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.MixedTags=void 0;var e,t=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(require("react")),r=require("react-dom/server"),n=require("prop-types"),o=(e=require("./tagify.min.js"))&&e.__esModule?e:{default:e};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const s=e=>e;const i=({name:e,value:n="",loading:u=!1,onInput:a=s,onAdd:l=s,onRemove:i=s,onEdit:c=s,onInvalid:f=s,onClick:d=s,onKeydown:p=s,onFocus:g=s,onBlur:y=s,onChange:h=s,readOnly:O,children:m,settings:v={},InputMode:b="input",autoFocus:w,className:j,whitelist:E,tagifyRef:x,placeholder:M="",defaultValue:P,showDropdown:k})=>{const N=(0,t.useRef)(),R=(0,t.useRef)(),T=(0,t.useRef)(),C=e=>{R.current=e},S=(0,t.useMemo)((()=>({ref:C,name:e,value:m||("string"==typeof n?n:JSON.stringify(n)),className:j,readOnly:O,onChange:h,autoFocus:w,placeholder:M,defaultValue:P})),[]),I=(0,t.useCallback)((()=>{w&&T.current&&T.current.DOM.input.focus()}),[T]);return(0,t.useEffect)((()=>{!function(e){if(e)for(let n in e)if(String(e[n]).includes(".createElement")){let o=e[n];e[n]=e=>(0,r.renderToStaticMarkup)(t.default.createElement(o,e))}}(v.templates),"textarea"==b&&(v.mode="mix"),E&&E.length&&(v.whitelist=E);const e=new o.default(R.current,v);return a&&e.on("input",a),l&&e.on("add",l),i&&e.on("remove",i),c&&e.on("edit",c),f&&e.on("invalid",f),p&&e.on("keydown",p),g&&e.on("focus",g),y&&e.on("blur",y),d&&e.on("click",d),x&&(x.current=e),T.current=e,I(),()=>{e.destroy()}}),[]),(0,t.useEffect)((()=>{I()}),[w]),(0,t.useEffect)((()=>{N.current&&(T.current.settings.whitelist.length=0,E&&E.length&&T.current.settings.whitelist.push(...E))}),[E]),(0,t.useEffect)((()=>{var e,t;N.current&&(e=n,t=T.current.value,JSON.stringify(e)!=JSON.stringify(t))&&T.current.loadOriginalValues(n)}),[n]),(0,t.useEffect)((()=>{N.current&&T.current.toggleClass(j)}),[j]),(0,t.useEffect)((()=>{N.current&&T.current.loading(u)}),[u]),(0,t.useEffect)((()=>{N.current&&T.current.setReadonly(O)}),[O]),(0,t.useEffect)((()=>{const e=T.current;N.current&&(k?(e.dropdown.show.call(e,k),e.toggleFocusClass(!0)):e.dropdown.hide.call(e))}),[k]),(0,t.useEffect)((()=>{N.current=!0}),[]),t.default.createElement("div",{className:"tags-input"},t.default.createElement(b,S))};i.propTypes={name:n.string,value:(0,n.oneOfType)([n.string,n.array]),loading:n.bool,children:n.element,onChange:n.func,readOnly:n.bool,settings:n.object,InputMode:n.string,autoFocus:n.bool,className:n.string,tagifyRef:n.object,whitelist:n.array,placeholder:n.string,defaultValue:(0,n.oneOfType)([n.string,n.array]),showDropdown:(0,n.oneOfType)([n.string,n.bool])};const c=t.default.memo(i);c.displayName="Tags";exports.MixedTags=e=>{let r=e.children,n=l(e,["children"]);return t.default.createElement(c,a({InputMode:"textarea"},n),r)};var f=c;return exports.default=f,c}));